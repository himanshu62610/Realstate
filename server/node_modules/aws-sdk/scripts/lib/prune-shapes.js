var getOperationShapeNames = require('./get-operation-shape-names').getOperationShapeNames;
var visitRelatedShapeNames = require('./visit-related-shape-names').visitRelatedShapeNames;

function pruneShapes(model) {

    
    var operationShapeNames = getOperationShapeNames(model);
    var shapeMap = model.shapes;

    for (operationShape of operationShapeNames) {
        
        visitRelatedShapeNames(operationShape, shapeMap);
    }

    
    var shapeNames = Object.keys(shapeMap);
    for (var name of shapeNames) {
        if (!shapeMap[name].visited) {
            delete shapeMap[name];
        }
    }

};

module.exports = {
    pruneShapes: pruneShapes
};